---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by jiangxuechen
--- DateTime: 2022/11/07 11:56
--- Describe: 基本四元数池
---

---@class QuaternionPool : table
QuaternionPool = class(nil, "QuaternionPool")
function QuaternionPool:ctor() end

---@public
function QuaternionPool:Init()
	---@private
	---@type Quaternion[]
	self.__deadList = {}
	---@private
	self.__initNum = 50
	---@private
	self.__stepNum = 10
	
	self:__Expand(self.__initNum)
end

---@private
function QuaternionPool:__Expand(_expandNum)
	local _deadList = self.__deadList
	for i = 1, _expandNum do
		table.insert(_deadList, Quaternion.identity_Local())
	end
end

---@public
---@param _initQuan Quaternion 用于初始化赋值的四元数
---@return Quaternion
function QuaternionPool:Pop(_initQuan)
	local _max = #self.__deadList
	if 0 == _max then
		self:__Expand(self.__stepNum)
		_max = #self.__deadList
	end
	local _ret = table.remove(self.__deadList, _max)
	Quaternion.Copy(_ret, _initQuan or Quaternion.identity_Gloabal())
	return _ret
end

---@public
---@param _quan Quaternion
function QuaternionPool:Push(_quan)
	table.insert(self.__deadList, _quan)
end

---@public
function QuaternionPool:Clear()
	self.__deadList = nil
	self.__initNum = nil
	self.__stepNum = nil
end

return QuaternionPool
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by jiangxuechen
--- DateTime: 2022/11/05 18:48
--- Describe: 基础V3池
---

---@class Vector3Pool : table
Vector3Pool = class(nil, "Vector3Pool") 
function Vector3Pool:ctor() end

---@public
function Vector3Pool:Init()
	---@private
	---@type Vector3[]
	self.__deadList = {}
	---@private
	self.__initNum = 100
	---@private
	self.__stepNum = 50
	
	self:__Expand(self.__initNum)
end

---@private
function Vector3Pool:__Expand(_expandNum)
	local _deadList = self.__deadList
	for i = 1, _expandNum do
		table.insert(_deadList, Vector3.zero_local())
	end
end

---@public
---@param _initV3 Vector3 用于初始化赋值的vector3
---@return Vector3
function Vector3Pool:Pop(_initV3)
	local _max = #self.__deadList
	if 0 == _max then
		self:__Expand(self.__stepNum)
		_max = #self.__deadList
	end
	local _ret = table.remove(self.__deadList, _max)
	Vector3.Copy(_ret, _initV3 or Vector3.zero_global())
	return _ret
end

---@public
---@param _vector Vector3
function Vector3Pool:Push(_vector)
	table.insert(self.__deadList, _vector)
end

---@public
function Vector3Pool:Clear()
	self.__deadList = nil
	self.__initNum = nil
	self.__stepNum = nil
end

return Vector3Pool
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by jiangxuechen
--- DateTime: 2022/01/13 11:13
--- Describe: 关卡逻辑管理
---

require "Battle/Logic/BattleLevel/BattleLevel_Define"
require "Battle/Logic/BattleLevel/BattleLevelStageManager"

---@class BattleLevelManager : table
BattleLevelManager = class(nil, "BattleLevelManager")
function BattleLevelManager:ctor(_data) end

function BattleLevelManager:Init(_data)
	self.__running = false
	
	---@type BattleLevelStageManager
	self.battleLevelStageManager = BattleLevelStageManager.New()
	self.battleLevelStageManager:Init(self)
end

-- 开始
function BattleLevelManager:Start()
	self.__running = true
	self:GoNextStage()
end

function BattleLevelManager:OnUpdate(_deltaTime)
	if not self.__running then return end
	self.battleLevelStageManager:OnUpdate(_deltaTime)
end

-- 获取当前关卡阶段
function BattleLevelManager:GetCurLevelStageEnum()
	return self.battleLevelStageManager.curStageEnum
end

-- 检查当前关卡是否位于某个阶段
function BattleLevelManager:CheckCurLevelStageEnum(_levelStageEnum)
	return self.battleLevelStageManager.curStageEnum == _levelStageEnum
end

-- 进入指定阶段
function BattleLevelManager:GoToStage(_levelStageEnum)
	self.battleLevelStageManager:GoToStage(_levelStageEnum)
end

-- 进入下个阶段
function BattleLevelManager:GoNextStage()
	self.battleLevelStageManager:GoNextStage()
end

-- 退出清理
function BattleLevelManager:Clear()
	self.__running = nil
	self.battleLevelStageManager:Clear()
	self.battleLevelStageManager = nil
end

return BattleLevelManager
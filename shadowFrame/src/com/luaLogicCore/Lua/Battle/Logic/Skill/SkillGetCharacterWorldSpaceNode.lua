---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by guokun
--- DateTime: 2022/11/18 17:10

require "Lib/class"
require "Battle/Logic/Skill/SkillBaseNode"

---@class SkillGetCharacterWorldSpaceNode : SkillBaseNode
---@field nodeId number 节点id
---@field nextNodes SkillNodeExitData[] 子节点
---@field vector Vector3 位移
SkillGetCharacterWorldSpaceNode = class(SkillBaseNode, 'SkillGetCharacterWorldSpaceNode');

---@param _nodeId number 节点id
---@param _once boolean 只执行一次
---@param _nextNodes SkillNodeExitData[] 子节点
---@param _specialExit SkillNodeExitData[] 特殊出口
---@param _vector table 位移
function SkillGetCharacterWorldSpaceNode:ctor(_nodeId, _once, _nextNodes, _specialExit,_vector)
    self.nodeId = _nodeId;
    self.once = _once;
    self.nextNodes = _nextNodes;
    self.specialExit = _specialExit;
    self.vector = Vector3.zero_local()
    self.vector.x = _vector.x;
    self.vector.y = _vector.y;
    self.vector.z = _vector.z;
end

---执行技能节点
---@param _actionStateManager ActionStateManage 行为管理器
---@param _dt number 更新时间
---@param _netId number 单位id
---@param _skillModel SkillModel 技能配置
---@return boolean,table 是否执行结束,执行行为输出数据
function SkillGetCharacterWorldSpaceNode:DoAction(_actionStateManager, _dt, _netId, _skillModel)
    local _currentObj = _actionStateManager:GetUnit():GetCurrentHeroObject();
    if not _currentObj then return end
    
    ---@type BattleObjCom_Property
    --local componentProperty = _currentObj:GetComponent(BattleObjectComponentType.Property);
    --local value = componentProperty:GetSkillCacheEn();
--
    --if self.clearAll then
    --    self.consume = -value
    --end
    --componentProperty:ChangeSkillCacheEn(self.consume);
    return true, nil;
end

---返回节点类型
---@public
---@return number 节点类型
function SkillGetCharacterWorldSpaceNode:GetType()
    return 58;
end

return SkillGetCharacterWorldSpaceNode;
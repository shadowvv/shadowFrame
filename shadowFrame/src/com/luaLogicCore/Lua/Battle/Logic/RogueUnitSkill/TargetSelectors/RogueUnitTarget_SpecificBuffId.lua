---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by jiangxuechen
--- DateTime: 2023/07/31 20:20
--- Describe:
---

---@class RogueUnitTarget_SpecificBuffId : RogueUnitSkillTargetSelectorBase
RogueUnitTarget_SpecificBuffId = class(RogueUnitSkillTargetSelectorBase, "RogueUnitTarget_SpecificBuffId")

---@public
function RogueUnitTarget_SpecificBuffId:SelectTarget()
	local _unitList = self:__SelectCampType()
	local _objList = self:__SelectOnTeamState(_unitList)
	
	local _checkBuffGroupIdList = self.__xlsData.params
	local _ret = self.__retList
	TableUtil.ClearTable(_ret)
	local _curNum = 0
	---@type BattleObjCom_Buff
	local _buffCom
	---@type boolean
	local _get = false
	--LogTools.LogByLevel(LogLevel.logErr, "RogueUnitTarget_SpecificBuffId:SelectTarget start", "_checkBuffGroupIdList", dumpTableEx(_checkBuffGroupIdList))
	for i = 1, #_objList do
		_buffCom = _objList[i]:GetComponent(BattleObjectComponentType.Buff)
		if _buffCom then
			_get = false
			for _, _buffGroupId in pairs(_checkBuffGroupIdList) do
				if _buffCom:CheckBuffExist(_buffGroupId, nil, nil) then
					--LogTools.LogByLevel(LogLevel.logErr, "RogueUnitTarget_SpecificBuffId:SelectTarget start", "1")
					_get = true
					break
				end
			end
			if _get then
				table.insert(_ret, _objList[i])
				_curNum = _curNum + 1
				if self.__numLimit and _curNum == self.__maxNum then
					return _ret
				end
			end
		end
	end
	--LogTools.LogByLevel(LogLevel.logErr, "RogueUnitTarget_SpecificBuffId:SelectTarget", "#_ret", #_ret, "_checkBuffGroupIdList", dumpTableEx(_checkBuffGroupIdList))
	return _ret
end
return RogueUnitTarget_SpecificBuffId
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by jiangxuechen
--- DateTime: 2023/07/29 17:11
--- Describe:
---

---@class RogueUnitEnCollector_SelfDestroyBullet : RogueUnitSkillEnergyCollectorBase
RogueUnitEnCollector_SelfDestroyBullet = class(RogueUnitSkillEnergyCollectorBase, "RogueUnitEnCollector_SelfDestroyBullet")

---@public
---@param _rogueUnitSkill RogueUnitSkillData
---@param _enCollectorXls RogueUnitSkillEnCollector
function RogueUnitEnCollector_SelfDestroyBullet:Init(_rogueUnitSkill, _enCollectorXls)
	self:__Init(_rogueUnitSkill, _enCollectorXls)
	
	self.__checkNetId = _rogueUnitSkill:GetUnit():GetNetId()
	self:GetBattleRoom().rogueUnitSkillService:AddListener(BATTLE_LOGIC_EVENT_ENUM.DESTROY_BULLET, self)
end

---@public
function RogueUnitEnCollector_SelfDestroyBullet:OnRemove()
	self:__OnRemove()
	self:GetBattleRoom().rogueUnitSkillService:RemoveListener(BATTLE_LOGIC_EVENT_ENUM.DESTROY_BULLET, self)
end

---@public
---@param _battleLogicEventV2 BattleLogicEventV2
function RogueUnitEnCollector_SelfDestroyBullet:OnTrigEvent(_battleLogicEventV2)
	self:__OnTrigEvent(_battleLogicEventV2)

	local _netId = _battleLogicEventV2.netId
	if _netId ~= self.__checkNetId then
		return
	end
	
	if CheckLogLevel(LogLevel.log) and LogTools.RogueUnitSkillLog then
		LogTools.LogByLevel(LogLevel.logErr, "肉鸽主公技", "闪避消弹增加主公技能量", "添加属性", self.__addPropId, self.__addPropStr, "添加数量", self.__addPropNum)
	end
	self.__unitPropCom:IncreasePropByName(self.__addPropStr, self.__addPropNum)
end

return RogueUnitEnCollector_SelfDestroyBullet
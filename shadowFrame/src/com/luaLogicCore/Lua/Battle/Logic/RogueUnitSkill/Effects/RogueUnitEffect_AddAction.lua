---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by jiangxuechen
--- DateTime: 2023/07/28 15:03
--- Describe:
---

---@class RogueUnitEffect_AddAction : RogueUnitSkillEffectBase
RogueUnitEffect_AddAction = class(RogueUnitSkillEffectBase, "RogueUnitEffect_AddAction")

---@public
---@param _action RogueUnitSkillActionBase
---@param _xls RogueUnitSkillEffect
function RogueUnitEffect_AddAction:Init(_action, _xls)
	self:__Init(_action, _xls)
	local _list = {}
	local _params = _xls.params
	for i = 1, #_params do
		table.insert(_list, math.floor(_params[i]))
	end
	---@private
	---@type number[]
	self.__addActionList = _list
end

---@public
---@param _targetObjList BattleObjectBase[]
function RogueUnitEffect_AddAction:OnTrig(_targetObjList)
	self:__OnTrig(_targetObjList)

	if CheckLogLevel(LogLevel.log) and LogTools.RogueUnitSkillLog then
		LogTools.LogByLevel(LogLevel.log, "肉鸽主公技", "    RogueUnitEffect_AddAction:OnTrig", "Effect触发", "所属ActionId", self:GetAction():GetId(), "当前Effect ID", self:GetId(), "当前Effect类型", self:GetEffectTypeDesc(), "要添加的ActionId列表", dumpTableEx(self.__addActionList))
	end

	---@type BattleUnitCom_RogueUnitSkill
	local _rogueUnitSkillCom = self:GetUnit():GetComponent(BattleUnitComponentType.RogueUnitSkill)
	if not _rogueUnitSkillCom then return end
	local _rogueSkill = _rogueUnitSkillCom:GetRogueUnitSkill()
	if not _rogueSkill then return end 

	for i = 1, #self.__addActionList do
		_rogueSkill:AddActionById(self.__addActionList[i])
	end
end

return RogueUnitEffect_AddAction
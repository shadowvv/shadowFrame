---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by jiangxuechen
--- DateTime: 2023/07/31 14:21
--- Describe:
---

---@class RogueUnitEffect_RemoveAction : RogueUnitSkillEffectBase
RogueUnitEffect_RemoveAction = class(RogueUnitSkillEffectBase, "RogueUnitEffect_RemoveAction")

---@public
---@param _action RogueUnitSkillActionBase
---@param _xls RogueUnitSkillEffect
function RogueUnitEffect_RemoveAction:Init(_action, _xls)
	self:__Init(_action, _xls)
	local _list = {}
	local _params = _xls.params
	for i = 1, #_params do
		table.insert(_list, math.floor(_params[i]))
	end
	---@private
	---@type number[]
	self.__removeActionList = _list
end

---@public
---@param _targetObjList BattleObjectBase[]
function RogueUnitEffect_RemoveAction:OnTrig(_targetObjList)
	self:__OnTrig(_targetObjList)
	
	if CheckLogLevel(LogLevel.log) and LogTools.RogueUnitSkillLog then
		LogTools.LogByLevel(LogLevel.log, "肉鸽主公技", "    RogueUnitEffect_RemoveAction:OnTrig", "Effect触发", "所属ActionId", self:GetAction():GetId(), "当前Effect ID", self:GetId(), "当前Effect类型", self:GetEffectTypeDesc(), "移除ActionId列表", dumpTableEx(self.__removeActionList))
	end

	---@type BattleUnitCom_RogueUnitSkill
	local _rogueUnitSkillCom = self:GetUnit():GetComponent(BattleUnitComponentType.RogueUnitSkill)
	if not _rogueUnitSkillCom then return end
	local _rogueSkill = _rogueUnitSkillCom:GetRogueUnitSkill()
	if not _rogueSkill then return end

	for i = 1, #self.__removeActionList do
		_rogueSkill:RemoveActionById(self.__removeActionList[i])
	end
end

return RogueUnitEffect_RemoveAction
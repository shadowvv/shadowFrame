 ---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by zhaopuyang.
--- DateTime: 2022/10/31 17:40

require "Lib/class"

---@class TalentSkillDestroyBulletTrigger : table
TalentSkillDestroyBulletTrigger = class(nil, 'TalentSkillDestroyBulletTrigger');

function TalentSkillDestroyBulletTrigger:ctor(_battleId)
    ---@type number
    self.battleId = _battleId
    self.battleRoom = GetBattleRoom(self.battleId)
    self.lastTriggerTime = TimeUtils.battleNow(self.battleId);
end

 ---@public
 ---@param _battleObject BattleObjectBase 触发单位
 ---@param _talentSkillTrigger SkillTrigger 被动技能配置
 ---@param _talentSkill BattlePlayerTalentSkill 被动技能
 function TalentSkillDestroyBulletTrigger:Check(_battleObject, _talentSkillTrigger,_talentSkill)

     if TimeUtils.battleNow(self.battleId) - self.lastTriggerTime < _talentSkillTrigger.parm6 then
         return 0;
     end
     if _talentSkillTrigger.parm1 and _talentSkillTrigger.parm1 == 0 then
         if self.battleRoom.battleLogicEventService:CheckChangeStateEvent(3,false,_battleObject:GetParentUnit():GetNetId(), _battleObject:GetObjectId()) then
             return 1;
         end
     elseif _talentSkillTrigger.parm1 == 1 then
         if self.battleRoom.battleLogicEventService:CheckDestroyBulletEvent(_battleObject:GetParentUnit():GetNetId(), _battleObject:GetObjectId()) then
             return 1;
         end
     end
     return 0;
 end

 ---@public
 function TalentSkillDestroyBulletTrigger:Reset()

 end

 ---被动技能触发类型
 ---@return number 被动技能触发类型
 function TalentSkillDestroyBulletTrigger:GetType()
     return 116;
 end

return TalentSkillDestroyBulletTrigger;
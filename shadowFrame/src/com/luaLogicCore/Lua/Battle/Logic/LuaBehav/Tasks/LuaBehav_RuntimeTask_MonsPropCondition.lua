---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by jiangxuechen
--- DateTime: 2022/01/20 16:28
--- Describe: 怪物检查属性条件节点
---

---@class LuaBehav_RuntimeTask_MonsPropCondition : LuaBehav_RuntimeTask
LuaBehav_RuntimeTask_MonsPropCondition = class(LuaBehav_RuntimeTask, "LuaBehav_RuntimeTask_MonsPropCondition")

function LuaBehav_RuntimeTask_MonsPropCondition:IsConditionalTask()
	return true
end

function LuaBehav_RuntimeTask_MonsPropCondition:OnStart()
	self:__OnStart()
end

function LuaBehav_RuntimeTask_MonsPropCondition:OnUpdate()
	self.__callRet, self.__getRet = BEHAVIOR_ACTION.GetMonsProp(self.battleId, self.netId, self.configTask.propKey, self.configTask.valueDescType)
	----LogTools.LogByLevel(LogLevel.log, "LuaBehav_RuntimeTask_MonsPropCondition", "OnUpdate", "self.__getRet", self.__getRe, "self.__callRet", self.__callRet, "self.configTask.compareType", --LogTools.GetEnumTableDesc(LuaBehav_Define_CompareType, self.configTask.compareType))
	local _retState = LuaBehav_Define_TaskState.Failure
	
	if self.__callRet then
		local _compareType = self.configTask.compareType
		if _compareType == LuaBehav_Define_CompareType.Equal then
			if self.__getRet == self.configTask.compareValue then
				_retState = LuaBehav_Define_TaskState.Success
			end
		elseif _compareType == LuaBehav_Define_CompareType.UnEqual then
			if self.__getRet ~= self.configTask.compareValue then
				_retState = LuaBehav_Define_TaskState.Success
			end
		elseif _compareType == LuaBehav_Define_CompareType.Larger then
			if self.__getRet > self.configTask.compareValue then
				_retState = LuaBehav_Define_TaskState.Success
			end
		elseif _compareType == LuaBehav_Define_CompareType.Smaller then
			if self.__getRet < self.configTask.compareValue then
				_retState = LuaBehav_Define_TaskState.Success
			end
		elseif _compareType == LuaBehav_Define_CompareType.SmallerEqual then
			if self.__getRet <= self.configTask.compareValue then
				_retState = LuaBehav_Define_TaskState.Success
			end
		elseif _compareType == LuaBehav_Define_CompareType.LargerEqual then
			if self.__getRet >= self.configTask.compareValue then
				_retState = LuaBehav_Define_TaskState.Success
			end
		end
	end
	
	self:__SetTaskState(_retState)
	return _retState
end


return LuaBehav_RuntimeTask_MonsPropCondition
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by jiangxuechen
--- DateTime: 2023/03/02 16:20
--- Describe:
---

---@class LuaBehav_RuntimeTask_MonsGetDisFromTarget : table
LuaBehav_RuntimeTask_MonsGetDisFromTarget = class(nil, "LuaBehav_RuntimeTask_MonsGetDisFromTarget")

function LuaBehav_RuntimeTask_MonsGetDisFromTarget:OnStart()
	self:__OnStart()
	
	local _value = self:__GetDisFromTarget()
	self.behavTree.treeVariableDic[self.variables.saveId:GetValue()] = _value

	if CheckLogLevel(LogLevel.log) then
		LogTools.LogByLevel(LogLevel.log, "CheckLuaBehav", "LuaBehav_RuntimeTask_MonsGetDisFromTarget", "self.variables.saveId:GetValue()", self.variables.saveId:GetValue(), "_value", _value)
	end
end

---@private
---@return number
function LuaBehav_RuntimeTask_MonsGetDisFromTarget:__GetDisFromTarget()
	local _unit = self.battleRoom.battleUnitManager:GetUnit(self.netId)
	if not _unit then return math.maxinteger end
	---@type BattleUnitCom_Behav
	local _behavCom = _unit:GetComponent(BattleUnitComponentType.Behav)
	if not _behavCom then return math.maxinteger end
	local _targetNetId = _behavCom:GetTarget()
	if not _targetNetId then return math.maxinteger end
	
	return _unit:GetBattleRoom().transUtil:GetDisBetweenUnits(self.netId, _targetNetId, BattleUnitDisRecordType.LogicDis) or math.maxinteger
end

return LuaBehav_RuntimeTask_MonsGetDisFromTarget
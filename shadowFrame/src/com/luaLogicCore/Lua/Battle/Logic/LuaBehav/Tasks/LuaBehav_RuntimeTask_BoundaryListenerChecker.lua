---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by jiangxuechen
--- DateTime: 2022/08/13 11:29
--- Describe: 单位范围监听检查
---


---@class LuaBehav_BoundaryListenerCheckParam : table
LuaBehav_BoundaryListenerCheckParam = class(nil, "LuaBehav_BoundaryListenerCheckParam")
function LuaBehav_BoundaryListenerCheckParam:ctor(_netId, _configTask)
	self.netId = _netId
	self.selectUnitType = _configTask.selectUnitType
	self.targetIdList = _configTask.targetIdList
	self.checkInner = _configTask.checkInner
	self.needKeyTag = _configTask.needKeyTag  --是否需要是关键单位
end

------------------------------------------------------------------------------------------------------------------------
---@class LuaBehav_RuntimeTask_BoundaryListenerChecker : LuaBehav_RuntimeTask
LuaBehav_RuntimeTask_BoundaryListenerChecker = class(LuaBehav_RuntimeTask, "LuaBehav_RuntimeTask_BoundaryListenerChecker")

function LuaBehav_RuntimeTask_BoundaryListenerChecker:IsConditionalTask()
	return true
end

function LuaBehav_RuntimeTask_BoundaryListenerChecker:OnUpdate()
	if not self.__checkParam then
		self.__checkParam = LuaBehav_BoundaryListenerCheckParam.New(self.netId, self.configTask)
	end
	local _retState = LuaBehav_Define_TaskState.Failure
	self.__callRet = BEHAVIOR_CHECK.UnitCheckBoundaryListener(self.battleId, self.__checkParam)
	--LogTools.LogByLevel(LogLevel.log, "LevelTrigger LuaBehav_RuntimeTask_LevelTriggerChecker", "self.__callRet", self.__callRet,"self.__checkParam", dumpTableEx(self.__checkParam))
	if self.__callRet then
		_retState = LuaBehav_Define_TaskState.Success
	end

	--LogTools.LogByLevel(LogLevel.log, "LuaBehav_RuntimeTask_LevelTriggerChecker", "_retState", --LogTools.GetEnumTableDesc(LuaBehav_Define_TaskState, _retState))
	--_retState = LuaBehav_Define_TaskState.Success
	self:__SetTaskState(_retState)
	return _retState
end

return LuaBehav_RuntimeTask_BoundaryListenerChecker
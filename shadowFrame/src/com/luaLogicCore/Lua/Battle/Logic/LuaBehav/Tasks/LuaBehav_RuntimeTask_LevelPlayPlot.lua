---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by jiangxuechen
--- DateTime: 2022/03/21 14:29
--- Describe: 关卡播放剧情
---


---@class LuaBehav_LevelPlayPlotParam : table
LuaBehav_LevelPlayPlotParam = class(nil, "LuaBehav_LevelPlayPlotParam")
function LuaBehav_LevelPlayPlotParam:ctor(_configTask, _caller)
	self.type = _configTask.type
	self.id = _configTask.id
	self.timeOut = _configTask.timeOut
	self.task = _caller
end

---@class LuaBehav_RuntimeTask_LevelPlayPlot : LuaBehav_RuntimeTask
LuaBehav_RuntimeTask_LevelPlayPlot = class(LuaBehav_RuntimeTask, "LuaBehav_RuntimeTask_LevelPlayPlot")

function LuaBehav_RuntimeTask_LevelPlayPlot:OnStart()
	self:__OnStart()
	self.__callRet = BEHAVIOR_ACTION.LevelPlayPlot(self.battleId, LuaBehav_LevelPlayPlotParam.New(self.configTask, self))
	self.__waiting = self.__callRet
end

function LuaBehav_RuntimeTask_LevelPlayPlot:OnUpdate(_deltaTime)
	if not self.__callRet then
		self:__SetTaskState(LuaBehav_Define_TaskState.Failure)
		return LuaBehav_Define_TaskState.Failure
	end

	if self.__waiting then
		self:__SetTaskState(LuaBehav_Define_TaskState.Running)
		return LuaBehav_Define_TaskState.Running
	end
	
	self:__SetTaskState(LuaBehav_Define_TaskState.Success)
	return LuaBehav_Define_TaskState.Success
end

function LuaBehav_RuntimeTask_LevelPlayPlot:OnPlayEnd()
	self.__waiting = nil
end

-- 节点被打断时调用
function LuaBehav_RuntimeTask_LevelPlayPlot:OnAbort()
	self.__waiting = nil
end

return LuaBehav_RuntimeTask_LevelPlayPlot
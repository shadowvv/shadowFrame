---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by jiangxuechen
--- DateTime: 2021/12/28 18:13
--- Describe:
---

---@class LuaBehav_RuntimeTask_CheckVariable : table
LuaBehav_RuntimeTask_CheckVariable = class(LuaBehav_RuntimeTask, "LuaBehav_RuntimeTask_CheckVariable")

function LuaBehav_RuntimeTask_CheckVariable:IsConditionalTask()
	return true
end

function LuaBehav_RuntimeTask_CheckVariable:OnUpdate(_deltaTime)
	local _retState = LuaBehav_Define_TaskState.Failure
	local _configTask = self.configTask
	local _variableValue = self.behavTree.variableDic[_configTask.id]
	
	local _compareType = _configTask.compareType
	if _compareType == LuaBehav_Define_CompareType.Equal then
		if _variableValue == _configTask.compareValue then
			_retState = LuaBehav_Define_TaskState.Success
		end
	elseif _compareType == LuaBehav_Define_CompareType.UnEqual then
		if _variableValue ~= _configTask.compareValue then
			_retState = LuaBehav_Define_TaskState.Success
		end
	elseif _compareType == LuaBehav_Define_CompareType.Larger then
		if type(_variableValue) == "number" and _variableValue > _configTask.compareValue then
			_retState = LuaBehav_Define_TaskState.Success
		end
	elseif _compareType == LuaBehav_Define_CompareType.Smaller then
		if type(_variableValue) == "number" and _variableValue < _configTask.compareValue then
			_retState = LuaBehav_Define_TaskState.Success
		end
	elseif _compareType == LuaBehav_Define_CompareType.True then
		if true == _variableValue then
			_retState = LuaBehav_Define_TaskState.Success
		end
	elseif _compareType == LuaBehav_Define_CompareType.False then
		if false == _variableValue then
			_retState = LuaBehav_Define_TaskState.Success
		end
	end
	
	self:__SetTaskState(_state)
	return _state
end
return LuaBehav_RuntimeTask_CheckVariable
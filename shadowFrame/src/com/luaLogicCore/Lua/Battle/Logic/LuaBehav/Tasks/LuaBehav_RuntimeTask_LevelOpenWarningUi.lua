---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by jiangxuechen
--- DateTime: 2022/03/31 17:17
--- Describe: 打开高能预警UI
---

---@class LuaBehav_RuntimeTask_LevelOpenWarningUi : LuaBehav_RuntimeTask
LuaBehav_RuntimeTask_LevelOpenWarningUi = class(LuaBehav_RuntimeTask, "LuaBehav_RuntimeTask_LevelOpenWarningUi")

function LuaBehav_RuntimeTask_LevelOpenWarningUi:OnStart()
	self:__OnStart()
	self.__startTime = self.battleRoom.behaviorManager:GetLevelTimeCnt()
	self.__timeTotal = self.configTask.timeOut
	self.__callRet = BEHAVIOR_ACTION.LevelOpenWarningUi(self.battleId)
end

function LuaBehav_RuntimeTask_LevelOpenWarningUi:OnUpdate(_deltaTime)
	if not self.__callRet then
		self:__SetTaskState(LuaBehav_Define_TaskState.Failure)
		return LuaBehav_Define_TaskState.Failure
	end

	local _timeDis = self.battleRoom.behaviorManager:GetLevelTimeCnt() - self.__startTime
	if _timeDis > self.__timeTotal then
		self:__SetTaskState(LuaBehav_Define_TaskState.Success)
		return LuaBehav_Define_TaskState.Success
	end
	
	self:__SetTaskState(LuaBehav_Define_TaskState.Running)
	return LuaBehav_Define_TaskState.Running
end

-- 节点被打断时调用
function LuaBehav_RuntimeTask_LevelOpenWarningUi:OnAbort()
	--LogTools.LogByLevel(LogLevel.log, "CheckLuaBehav", "LuaBehav_RuntimeTask_LevelOpenWarningUi", "OnAbort", self.netId)
	self:__OnAbort()
	BEHAVIOR_ACTION.LevelCloseWarningUi(self.battleId)
end

-- 退出节点时调用
function LuaBehav_RuntimeTask_LevelOpenWarningUi:OnExit()
	--LogTools.LogByLevel(LogLevel.log, "CheckLuaBehav", "LuaBehav_RuntimeTask_LevelOpenWarningUi", "OnExit")
	self:__OnExit()
	BEHAVIOR_ACTION.LevelCloseWarningUi(self.battleId)
end

return LuaBehav_RuntimeTask_LevelOpenWarningUi
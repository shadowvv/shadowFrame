---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by jiangxuechen
--- DateTime: 2022/10/18 15:55
--- Describe: 超时节点(只能接一个子节点)
---

---@class LuaBehav_RuntimeTask_TimeOut : LuaBehav_RuntimeTask
LuaBehav_RuntimeTask_TimeOut = class(LuaBehav_RuntimeTask, "LuaBehav_RuntimeTask_TimeOut")

function LuaBehav_RuntimeTask_TimeOut:OnStart()
	self:__OnStart()
	self.__startTime = self:GetCurTimeCnt()
	self.__timeTotal = self.configTask.time
end

function LuaBehav_RuntimeTask_TimeOut:OnChildExecuted(_cnt, _childState)
	--LogTools.LogByLevel(LogLevel.log, "LuaBehav_RuntimeTask_TimeOut:GetDirectState", "self:GetCurTimeCnt() - self.__startTime", self:GetCurTimeCnt() - self.__startTime, "self.__timeTotal", self.__timeTotal)
	local _stateList = self.childStateList
	if _cnt > #_stateList then return end

	if self:GetCurTimeCnt() - self.__startTime > self.__timeTotal then
		self:SetForceState()
		_stateList[_cnt] = LuaBehav_Define_TaskState.Failure
	else
		_stateList[_cnt] = _childState
	end
end

return LuaBehav_RuntimeTask_TimeOut
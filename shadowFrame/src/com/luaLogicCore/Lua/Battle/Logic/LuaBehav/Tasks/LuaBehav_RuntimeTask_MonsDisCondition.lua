---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by jiangxuechen
--- DateTime: 2022/01/20 14:51
--- Describe: 怪物各种范围判断的条件节点
---

---@class LuaBehav_RuntimeTask_MonsDisCondition : table
LuaBehav_RuntimeTask_MonsDisCondition = class(LuaBehav_RuntimeTask, "LuaBehav_RuntimeTask_MonsDisCondition")

function LuaBehav_RuntimeTask_MonsDisCondition:IsConditionalTask()
	return true
end

function LuaBehav_RuntimeTask_MonsDisCondition:OnStart()
	self:__OnStart()

	if self.configTask.conditionType == LuaBehav_Define_MonsDisConditionType.CurTargetInAtkDis then
		self:OnCaseCurTargetInAtkDis()
	elseif self.configTask.conditionType == LuaBehav_Define_MonsDisConditionType.CurTargetInChaseDis then
		self:OnCaseCurTargetInChaseDis()
	elseif self.configTask.conditionType == LuaBehav_Define_MonsDisConditionType.CurTargetInEscapeDis then
		self:OnCaseCurTargetInEscapeDis()
	end
		
end

function LuaBehav_RuntimeTask_MonsDisCondition:OnUpdate()
	local _retState = LuaBehav_Define_TaskState.Failure
	
	if self.configTask.compareType then
		if self.__callRet then
			_retState = LuaBehav_Define_TaskState.Success
		end
	else
		if not self.__callRet then
			_retState = LuaBehav_Define_TaskState.Success
		end
	end
	
	self:__SetTaskState(_retState)
	return _retState
end

-- 当前目标是否在攻击距离内
function LuaBehav_RuntimeTask_MonsDisCondition:OnCaseCurTargetInAtkDis()
	local _ratio = self.configTask.ratio or 1
	self.__callRet = LuaBehav_Interfaces.CheckCurTargetInAtkDis(self.netId, _ratio)
end

-- 当前目标是否在追击距离内
function LuaBehav_RuntimeTask_MonsDisCondition:OnCaseCurTargetInChaseDis()
	local _ratio = self.configTask.ratio or 1
	self.__callRet = LuaBehav_Interfaces.CheckCurTargetInChaseDis(self.netId, _ratio)
end

-- 当前目标是否在逃离距离内
function LuaBehav_RuntimeTask_MonsDisCondition:OnCaseCurTargetInEscapeDis()
	local _ratio = self.configTask.ratio or 1
	self.__callRet = LuaBehav_Interfaces.CheckCurTargetInEscapeDis(self.netId, _ratio)
end


return LuaBehav_RuntimeTask_MonsDisCondition
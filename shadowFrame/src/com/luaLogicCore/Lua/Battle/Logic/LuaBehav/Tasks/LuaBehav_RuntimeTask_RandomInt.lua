---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by jiangxuechen
--- DateTime: 2022/01/21 11:51
--- Describe: int随机值, 闭区间，随机结果乘以scale后存储到指定id的变量中
---

---@class LuaBehav_RuntimeTask_RandomInt : LuaBehav_RuntimeTask
LuaBehav_RuntimeTask_RandomInt = class(LuaBehav_RuntimeTask, "LuaBehav_RuntimeTask_RandomInt")

---@private
function LuaBehav_RuntimeTask_RandomInt:__InitConfigTaskVariables(_variableDic, _treeVariableDic)
	---@type LuaBehav_RuntimeVariableBase[]
	self.variables = {}
	if not _variableDic then
		self.variables.min = LuaBehav_RuntimeVariableBase.New()
		self.variables.min:Init({variableType = LuaBehav_Define_TaskVariableType.SampleVariable, variableValue = self.configTask.min}, _treeVariableDic)
		self.variables.max = LuaBehav_RuntimeVariableBase.New()
		self.variables.max:Init({variableType = LuaBehav_Define_TaskVariableType.SampleVariable, variableValue = self.configTask.max}, _treeVariableDic)
		self.variables.scale = LuaBehav_RuntimeVariableBase.New()
		self.variables.scale:Init({variableType = LuaBehav_Define_TaskVariableType.SampleVariable, variableValue = self.configTask.scale}, _treeVariableDic)
		self.variables.saveId = LuaBehav_RuntimeVariableBase.New()
		self.variables.saveId:Init({variableType = LuaBehav_Define_TaskVariableType.SampleVariable, variableValue = self.configTask.saveId}, _treeVariableDic)
	else
		for _key, _configVariable in pairs(_variableDic) do
			self.variables[_key] = LuaBehav_RuntimeVariableBase.New()
			self.variables[_key]:Init(_configVariable, _treeVariableDic)
		end
	end
end

-- 
function LuaBehav_RuntimeTask_RandomInt:OnStart()
	self:__OnStart()
	
	local _min = self.variables.min:GetValue() or 0
	local _max = self.variables.max:GetValue() or 1
	if _min > _max then
		_min = _max
		_max = self.variables.min:GetValue() or 1
	end
	local _scale = self.variables.scale:GetValue() or 1
	local randomUtil = self.battleRoom.randomUtil
	local _randomRet = randomUtil:RandomInt(_min, _max) * _scale
	self.behavTree:SetTreeVariable(self.variables.saveId, _randomRet, true)
	--LogTools.LogByLevel(LogLevel.log, "CheckLuaBehav", "LuaBehav_RuntimeTask_RandomInt", "self.variables.min:GetValue()", self.variables.min:GetValue(), "self.variables.max:GetValue()", self.variables.max:GetValue(), "_min", _min, "_max", _max, "_scale", _scale, "_randomRet", _randomRet, "self.variables.saveId:GetValue()", self.variables.saveId:GetValue())
end

return LuaBehav_RuntimeTask_RandomInt
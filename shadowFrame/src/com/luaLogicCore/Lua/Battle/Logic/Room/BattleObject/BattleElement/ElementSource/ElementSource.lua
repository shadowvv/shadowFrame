---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by hejincheng.
--- DateTime: 2022/3/2 19:06

require "Lib/class"

---@class ElementSource : table
---@field id number
ElementSource = class(nil, 'ElementSource');

function ElementSource:ctor(_id)
    self.id = _id;
end

---@public
function ElementSource:GetId()
    return self.id
end

---元素积累加成
---@public
---@param _sourceObject BattleObjectBase
---@param _targetObject BattleObjectBase
---@param _elementId number
---@param _elementValue number
---@param _elementSourceId number
---@return number
function ElementSource:AddElementAccValue(_sourceObject, _targetObject, _elementId, _elementValue, _elementSourceId)
    return _elementValue
end

---@protected
---@param _sourceObject BattleObjectBase
---@param _targetObject BattleObjectBase
---@param _elementId number
---@param _elementValue number
---@param _elementSourceId number
function ElementSource:__PrintAddElementLog(_sourceObject, _targetObject, _elementId, _elementValue, _elementSourceId, _addAccValue, _finalValue)
    -- 元素添加Log
    if LogTools.ElementLog and CheckLogLevel(LogLevel.log) then
        if not _addAccValue or _addAccValue == 0 then
            return
        end
        local _battleRoom = _targetObject:GetBattleRoom()
        local _castUnit = _sourceObject:GetParentUnit()
        local _targetUnit = _targetObject:GetParentUnit()
        local _castObjectLog = "[" .. _battleRoom.battleUnitManager:GetBattleUnitTypeName(_castUnit:GetUnitType()) .. "][" .. _castUnit:GetNetId() .. "][" .. tostring(_sourceObject:GetDicId()) .. "]"
        local _targetObjectLog = "[" .. _battleRoom.battleUnitManager:GetBattleUnitTypeName(_targetUnit:GetUnitType()) .. "][" .. _targetUnit:GetNetId() .. "][" .. tostring(_targetObject:GetDicId()) .. "]"

        -- 改变值
        LogTools.LogByLevel(LogLevel.log, "元素", ELEMENT_CHANGE_TYPE.Add, "释放者" .. _castObjectLog .. "添加目标" .. _targetObjectLog, GetBattleElementNameById(_elementId) .. ":" .. tostring(_elementValue),
                "加成来源[" .. self.__cname .. "/" .. tostring(_elementSourceId) .. "]", "积累初始值", _elementValue, "来源积累加成", _addAccValue, "积累最终值", _finalValue)
    end
end

return ElementSource;

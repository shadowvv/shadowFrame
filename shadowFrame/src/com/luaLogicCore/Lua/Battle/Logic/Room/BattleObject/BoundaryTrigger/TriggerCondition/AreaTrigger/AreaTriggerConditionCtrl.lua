---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by jiangxuechen
--- DateTime: 2022/04/08 14:29
--- Describe: 触发条件管理
---

require "Battle/Logic/Room/BattleObject/BoundaryTrigger/TriggerCondition/AreaTrigger/AreaTriggerConditionData"

---触发条件类型
---@class AreaTriggerConditionType : table
AreaTriggerConditionType = {
	None = 0,               -- 无条件
    SpecificFirstCamp = 1,  -- 指定一级阵营列表
}

---@class AreaTriggerConditionCtrl : BoundaryTriggerConditonCtrlBase
AreaTriggerConditionCtrl = class(BoundaryTriggerConditonCtrlBase, "AreaTriggerConditionCtrl")

---@public
---@param _triggerCom BattleObjCom_BoundaryTrigger
---@param _areaColliderInstance AreaColliderInstance
function AreaTriggerConditionCtrl:Init(_triggerCom, _areaColliderInstance)
	self:__Init(_triggerCom)
	
	self.__enterCondition_1 = self:__GetTrigCondition(_areaColliderInstance.enterCondition)
	self.__enterCondition_2 = self:__GetTrigCondition(_areaColliderInstance.enterCondition2)
	self.__stayCondition = self:__GetTrigCondition(_areaColliderInstance.stayCondition)
	self.__leaveCondition_1 = self:__GetTrigCondition(_areaColliderInstance.leaveCondition)
	self.__leaveCondition_2 = self:__GetTrigCondition(_areaColliderInstance.leaveCondition2)
end

---根据类型获取触发条件
---@private
---@return AreaTriggerConditionData
function AreaTriggerConditionCtrl:__GetTrigCondition(_trigConditionId)
	---@type AreaColliderCondition
	local _conditionXls = self:GetBattleRoom().inputDataSource:GetDict("AreaColliderCondition", _trigConditionId)
	if not _conditionXls then return nil end

	---@type AreaTriggerConditionData
	local _condition = AreaTriggerConditionData.New()
	_condition:Init(self.__triggerCom:GetBattleId(), _conditionXls)
	return _condition
end

return AreaTriggerConditionCtrl

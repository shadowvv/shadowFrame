---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by jiangxuechen
--- DateTime: 2022/04/12 16:54
--- Describe: 
---

---@class AreaTriggerConditionData : table
AreaTriggerConditionData = class(nil, "AreaTriggerConditionData")
function AreaTriggerConditionData:ctor(_data) end
function AreaTriggerConditionData:OnUpdate(_deltaTime) end

---@public
---@param _battleId number
---@param _areaColliderCondition AreaColliderCondition
function AreaTriggerConditionData:Init(_battleId, _areaColliderCondition)
	self.battleId = _battleId
	---@type BattleRoom
	self.battleRoom = GetBattleRoom(self.battleId)
	self.__type = _areaColliderCondition.type
	self.__param = _areaColliderCondition.param
end

---@public
function AreaTriggerConditionData:Check(_netIdList)
	--LogTools.LogByLevel(LogLevel.log, "CheckArea", "AreaTriggerConditionData Check start", "_netIdList", dumpTableEx(_netIdList), "self.__type", LogTools.GetEnumTableDesc(AreaTriggerConditionType, self.__type))
	local _ret

	if self.__type == AreaTriggerConditionType.None then
		--LogTools.LogByLevel(LogLevel.log, "CheckArea", "AreaTriggerConditionData Check 1")
		_ret = _netIdList
	elseif self.__type == AreaTriggerConditionType.SpecificFirstCamp then
		--LogTools.LogByLevel(LogLevel.log, "CheckArea", "AreaTriggerConditionData Check 2")
		_ret = {}
		local _firstCampList = self.__param
		local _unitManager = self.battleRoom.battleUnitManager
		for i = 1, #_netIdList do
			local _netId = _netIdList[i]
			local _unit = _unitManager:GetUnit(_netId)
			--LogTools.LogByLevel(LogLevel.log, "CheckArea", "AreaTriggerConditionData Check start", "_netId", _netId, "_unit", _unit)
			if _unit then
				---@type BattleUnitCom_Camp
				local _campCom = _unit:GetComponent(BattleUnitComponentType.Camp)
				--LogTools.LogByLevel(LogLevel.log, "CheckArea", "AreaTriggerConditionData Check start", "_campCom", _campCom)
				if _campCom and _campCom:CheckAnyOfFirstCamp(_firstCampList) then
					table.insert(_ret, _netId)
				end
			end
		end
	end
	
	return _netIdList
end

---@public
function AreaTriggerConditionData:Clear()
	self.__type = nil
	self.__param = nil
end

return AreaTriggerConditionData
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by zhaopuyang.
--- DateTime: 2021/12/22 11:14
--- 行为状态

require "Lib/class"

---@class ActionState:table 行为状态基类
---@field battleRoom BattleRoom 战斗
---@field stateParam StateParameter 状态参数配置
---@field unitType number 单位类型
ActionState = class(nil, 'ActionState');

---@param _stateParamId number 状态参数配置Id
---@param _battleId number 状态参数配置Id
---@param _unitType number 单位类型
function ActionState:ctor(_battleId, _stateParamId,_unitType)
    self.battleRoom = GetBattleRoom(_battleId)
    self.stateParam = self.battleRoom.inputDataSource:GetDict("StateParameter",_stateParamId);
    self.unitType = _unitType;
end

-- 切换行为,判断行为的参数正确性
---@param _actionStateManager ActionStateManage 行为管理器
---@param _currentStates ActionState[] 行为管理器
---@param _objectId number 角色id
---@return boolean 是否可进入行为
function ActionState:EnterAction(_actionStateManager, _currentStates, _objectId)
    return true;
end

-- 执行行为
---@param _actionStateManager ActionStateManage 行为管理器
---@param _dt number 更新时间
---@param _netId number 单位id
---@param _objId number 单位对应实体id
function ActionState:DoAction(_actionStateManager, _dt, _netId,_objId)

end

-- 退出行为
---@param _actionStateManager ActionStateManage 行为管理器
---@param _isBreak boolean 是否为打断退出
---@param _isActive boolean 是否为主动打断
function ActionState:ExitAction(_actionStateManager,_isBreak,_isActive)

end

-- 是否为主动状态
---@return boolean 是否为主动状态
function ActionState:IsActive()
    return true;
end

-- 行为状态Id
---@return number
function ActionState:GetId()
    return nil;
end

---StateParameterId发生改变
---@public
function ActionState:OnStateParamIdChanged(_newId)
    self.stateParam = self.battleRoom.inputDataSource:GetDict("StateParameter",_newId);
end

---获得状态冲突表
---@return StateSwitchRule
function ActionState:GetSwitchRule()
    return self.battleRoom.inputDataSource:GetDict("StateSwitchRule",self:GetId());
end

function ActionState:IsMoveAction()
    if self:GetId() == 2 or self:GetId() == 3 or self:GetId() == 4 then
        return true;
    end
    return false;
end

-- 打印Action
function ActionState:PrintActionLog()
    return self.__cname
end

return ActionState;
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by hejincheng
--- DateTime: 2022/02/11 11:13
---
--- 应该不会有PVP，因为PVP和PVE对于战斗结果判断不同，PVE是多人统一结果，PVP每个人结果不同，因此结构和方法有所不同
--- 这里加一层继承预留PVP的战斗结果处理逻辑
---
--- Describe: 关卡胜败条件管理
---

---@class OverConditionManager : table
---@field battleResult BattleResult 战斗结果
---@field overCondition number 战斗结束触发条件
---@field overTime number 战斗结束时间
OverConditionManager = class(nil, "OverConditionManager")

---@public
---@param _levelConditionManager LevelConditionManager
function OverConditionManager:__Init(_levelConditionManager)
    self.levelConditionManager = _levelConditionManager
    self.battleResult = BattleResultEnum.NO_RESULT
    self.checkLastMonsterLevelUnitIds = {}
    self.overCondition = 0
    self.overTime = 0
end

---@return boolean,boolean 是否结束,是否立即结束
function OverConditionManager:__CheckBattleOver()
    return false,false
end

function OverConditionManager:__OnUpdate(_deltaTime, _frameId)
end

------------------------------------------------------------------------------------------------------------------------------
-- 初始战斗
---@public
---@param _levelConditionManager LevelConditionManager
function OverConditionManager:Init(_levelConditionManager)
    self:__Init(_levelConditionManager)
end

-- 检测战斗是否结束
---@public
---@return boolean,boolean
function OverConditionManager:CheckBattleOver()
    return self:__CheckBattleOver()
end

---@public
function OverConditionManager:OnUpdate(_deltaTime, _frameId)
    return self:__OnUpdate(_deltaTime, _frameId)
end

-- 设置结束结果
---@public
function OverConditionManager:SetBattleOver(battleResult, condition)
    self.battleResult = battleResult
    self.overCondition = condition
end

-- 重置
---@public
function OverConditionManager:Clear()
end

return OverConditionManager

---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by jiangxuechen
--- DateTime: 2022/11/01 16:24
--- Describe:
---

---@class BoundaryTriggerLifeConditionCtrlBase : table
BoundaryTriggerLifeConditionCtrlBase = class(nil, "BoundaryTriggerLifeConditionCtrlBase")
function BoundaryTriggerLifeConditionCtrlBase:ctor(_data) end

---@public
function BoundaryTriggerLifeConditionCtrlBase:Init(_triggerCom) 
	self:__Init(_triggerCom)
end

---@protected
---@param _triggerCom BattleObjCom_BoundaryTrigger
function BoundaryTriggerLifeConditionCtrlBase:__Init(_triggerCom)
	self.__triggerCom = _triggerCom
	self.__timeStamp = _triggerCom:GetObject():GetCreateTime()
	self.__openConditions = {}
	self.__closeConditions = {}
	self.__state = BoundaryTriggerLifeState.Created
end

---@public
function BoundaryTriggerLifeConditionCtrlBase:OnUpdate(_deltaTime)
	if self.__state == BoundaryTriggerLifeState.Created then
		for _, _openCondition in pairs(self.__openConditions) do
			if _openCondition:OnUpdate(_deltaTime) then
				self:__TrigOpen()
				return
			end
		end
	elseif self.__state == BoundaryTriggerLifeState.Opened then
		for _, _closeCondition in pairs(self.__closeConditions) do
			if _closeCondition:OnUpdate(_deltaTime) then
				self:__TrigClose()
				return
			end
		end
	elseif self.__state == BoundaryTriggerLifeState.Closed then
		self:__TrigWaitDestroy()
		return
	end
end

---@protected
function BoundaryTriggerLifeConditionCtrlBase:__TrigOpen()
	self.__triggerCom:OnOpen()
end

---@protected
function BoundaryTriggerLifeConditionCtrlBase:__TrigClose()
	self.__triggerCom:OnClose()
end

---@protected
function BoundaryTriggerLifeConditionCtrlBase:__TrigWaitDestroy()
	self.__state = BoundaryTriggerLifeState.WaitDestroy
end

---@public
function BoundaryTriggerLifeConditionCtrlBase:SetTimeStamp(_value)
	self.__timeStamp = _value
end

---获取时间戳
---@public
function BoundaryTriggerLifeConditionCtrlBase:GetTimeStamp()
	return self.__timeStamp
end

---修改关闭时间总长
---@public
function BoundaryTriggerLifeConditionCtrlBase:ChangeCloseConditionTimeTotal(_changeValue)
	if 0 == #self.__closeConditions then return end
	for i = 1, #self.__closeConditions do
		self.__closeConditions[i]:ChangeTimeTotal(_changeValue)
	end
end

---修改当前持续时间
---@public
function BoundaryTriggerLifeConditionCtrlBase:ChangeCloseConditionTimeAcc(_changeValue)
	if 0 == #self.__closeConditions then return end
	for i = 1, #self.__closeConditions do
		self.__closeConditions[i]:ChangeTimeAcc(_changeValue)
	end
end

---@public
function BoundaryTriggerLifeConditionCtrlBase:OnOpen()
	self.__state = BoundaryTriggerLifeState.Opened
end

---@public
function BoundaryTriggerLifeConditionCtrlBase:OnClose() 
	self.__state = BoundaryTriggerLifeState.Closed
end

---@public
function BoundaryTriggerLifeConditionCtrlBase:OnDestroy() 
	
end

---@public
---@param _state BoundaryTriggerLifeState
function BoundaryTriggerLifeConditionCtrlBase:SetState(_state)
	self.__state = _state
end

---@public
---@return BoundaryTriggerLifeState
function BoundaryTriggerLifeConditionCtrlBase:GetState()
	return self.__state
end

---@public
---@param _state BoundaryTriggerLifeState
function BoundaryTriggerLifeConditionCtrlBase:CheckState(_state)
	return self.__state == _state
end

---@public
---@return BattleObjCom_BoundaryTrigger
function BoundaryTriggerLifeConditionCtrlBase:GetTriggerCom()
	return self.__triggerCom
end

---@public
---@return BattleRoom
function BoundaryTriggerLifeConditionCtrlBase:GetBattleRoom()
	return self.__triggerCom.battleRoom
end

---@public
function BoundaryTriggerLifeConditionCtrlBase:Clear() 
	self:__Clear()
end

---@protected
function BoundaryTriggerLifeConditionCtrlBase:__Clear() 
	self.__triggerCom = nil
	self.__openConditions = nil
	self.__closeConditions = nil
	self.__state = nil
end
return BoundaryTriggerLifeConditionCtrlBase

---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by zhaopuyang.
--- DateTime: 2022/8/12 17:48

require "Lib/class"

---@class ObjectCollider : table
---@field id number id
---@field nodeIndex number[] 物体所在八叉树节点id
---@field collider BaseCollider[] 碰撞体集合
ObjectCollider = class(nil, 'ObjectCollider');

function ObjectCollider:ctor(_objectType,_templateXls)
    self.id = 0;
    self.nodeIndex = {};
    self.collider = {};
    self.originalCollider = {};
    self.objectType = _objectType;
    self.templateXls = _templateXls;
end

---@public 添加碰撞体
---@param _collider BaseCollider 碰撞体
function ObjectCollider:AddCollider(_collider, _originalCollider)
    table.insert(self.collider,_collider);
    if _originalCollider then
        table.insert(self.originalCollider,_originalCollider);
    end
end

---@public 清除碰撞体
function ObjectCollider:ClearCollider()
    for i, v in pairs(self.collider) do
        self.collider[i] = nil;
    end
end

---@public 移动碰撞体
---@param _posChange Vector3 位置变化
function ObjectCollider:MoveCollider(_posChange)
    for i, v in pairs(self.collider) do
        v:Move(_posChange);
    end
end

---@public 碰撞体转向
---@param _rotationChange Quaternion 朝向变化
function ObjectCollider:RotateCollider(_rotationChange)
    for i, v in pairs(self.collider) do
        v:Rotate(_rotationChange);
    end
end

function ObjectCollider:GetObjectId()
    return self.id;
end

return ObjectCollider;
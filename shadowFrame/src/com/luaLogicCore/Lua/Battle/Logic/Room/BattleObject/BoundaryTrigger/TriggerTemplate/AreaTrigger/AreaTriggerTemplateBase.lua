---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by jiangxuechen
--- DateTime: 2022/04/09 15:03
--- Describe: 模板基类
---

---@class AreaTriggerTemplateBase : table
AreaTriggerTemplateBase = class(nil, "AreaTriggerTemplateBase")
function AreaTriggerTemplateBase:ctor(_data) end

---@protected
---@param _templateCtrl AreaTriggerTemplateCtrl
---@param _templateXls AreaColliderTemplate
function AreaTriggerTemplateBase:__Init(_templateCtrl, _templateXls)
	self.__templateCtrl = _templateCtrl
	self.__xls = _templateXls

	self.__scaleTime = _templateXls.scaleTime
	local _startSize = _templateXls.startLogicSize
	self.__startSize = Vector4.New(_startSize[1], _startSize[2], _startSize[3], _startSize[4])
	local _endSizeScale = _templateXls.finalLogicScale
	self.__endSize = Vector4.New(_startSize[1] * _endSizeScale[1], _startSize[2] * _endSizeScale[2], _startSize[3] * _endSizeScale[3], _startSize[4] * _endSizeScale[4])
end

---@protected
function AreaTriggerTemplateBase:__CountSizeScale(_createTime, _nowTime)
	if self.__scaleTime > 0 then
		local _deltaTime = _nowTime - _createTime
		if _deltaTime > self.__scaleTime then
			return self.__endSize
		end
		
		return Vector4.Lerp(self.__startSize, self.__endSize, _deltaTime/self.__scaleTime)
	else
		return self.__startSize
	end
end

---@protected
function AreaTriggerTemplateBase:__Clear()
	self.__templateCtrl = nil
	self.__xls = nil
	self.__scaleTime = nil
	self.__startSize = nil
	self.__endSize = nil
end

------------------------------------------------------------------------------------------------------------------------
---@public
function AreaTriggerTemplateBase:Init(_templateCtrl)
	self:__Init(_templateCtrl)
end

---检查触发有效性
---逻辑层只进行简单的AABB检查
---@public
function AreaTriggerTemplateBase:CheckAABB(_createTime, _nowTime, _nowPos, _checkPos)
	return true
end

---@public
function AreaTriggerTemplateBase:Clear()
	self:__Clear()
end

return AreaTriggerTemplateBase
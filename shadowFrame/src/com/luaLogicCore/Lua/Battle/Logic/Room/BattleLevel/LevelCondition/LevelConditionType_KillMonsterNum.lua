---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by hejincheng.
--- DateTime: 2022/2/11 18:35

require "Lib/class"

---@class LevelConditionType_KillMonsterNum : LevelConditionType
---@field id number
---@field event number
---@field initState number 初始状态
---@field eventChangeState number 事件改变状态
---@field eventParamFunc function 获取检测参数方法
---@field eventCheckFunc function 事件检测方法
---@field killMonster boolean 是否是击杀怪物条件
LevelConditionType_KillMonsterNum = class(LevelConditionType, 'LevelConditionType_KillMonsterNum');

---获取监听的最后死亡怪物id
---@public
---@param _checkLastMonsterLevelUnitIds number[]
---@param _levelCondition LevelCondition
---@param  _battleId number
function LevelConditionType_KillMonsterNum:GetCheckLastMonsterLevelUnitIds(_checkLastMonsterLevelUnitIds, _levelCondition, _battleId)
    -- 参数
    local _params = self:__GetEventParam(_levelCondition, nil)
    local _battleRoom = GetBattleRoom(_battleId)
    -- 全部怪物
    local _allUnits = _battleRoom.battleLevelManager.levelUnitManager:GetLevelUnitByType(LevelUnitTypeEnum.MONSTER)
    if not _allUnits then
        return
    end
    for _, _levelUnit in pairs(_allUnits) do
        if _params[1] == 0 then
            -- 任意类型怪物
            table.insert(_checkLastMonsterLevelUnitIds, _levelUnit.id)
        else
            -- 指定怪物instanceId
            local _checkMonsterInstanceId = _params[1]
            local _monsterInstanceId = _levelUnit.instanceId
            if _monsterInstanceId == _checkMonsterInstanceId then
                table.insert(_checkLastMonsterLevelUnitIds, _levelUnit.id)
            end
        end
    end
end

return LevelConditionType_KillMonsterNum;

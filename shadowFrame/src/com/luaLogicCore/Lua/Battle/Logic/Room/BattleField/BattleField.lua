---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by zhaopuyang.
--- DateTime: 2022/8/12 16:44

require "Lib/class"
require "Battle/Logic/Room/BattleField/OcTree/OcTreeRoot"

---@class BattleFiled : table
---@field ocTree OcTreeRoot 八叉树根节点
BattleField = class(nil, 'BattleFiled');

function BattleField:ctor()
    self.ocTree = nil;
end

function BattleField:Init(_fieldData)
    self.ocTree = OcTreeRoot.New();
    self.ocTree:Init(_fieldData);
end

---@public 添加单位
---@param _object ObjectCollider 场景单位
function BattleField:AddObject(_object)
    self.ocTree:AddObject(_object);
end

---@public 移除单位
---@param _object ObjectCollider 场景单位
function BattleField:RemoveObject(_object)
    self.ocTree:RemoveObject(_object);
end

---@public 单位移动
---@param _object ObjectCollider 场景单位
---@param _positionChange Vector3 移动改变
---@param _rotationChange Quaternion 转向改变
function BattleField:ObjectMove(_object, _positionChange, _rotationChange)
    local colliders = self.ocTree:ObjectMoveTest(_object,_positionChange,_rotationChange);
    if #colliders > 0 then
        return true;
    end
    return false;
end

return BattleField;